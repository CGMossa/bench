<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>High Precision Timing of R Expressions • bench</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="High Precision Timing of R Expressions">
<meta property="og:description" content="Tools to accurately benchmark and analyze execution times for R expressions.">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">bench</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/06/bench-1.0.1/">Version 1.0.1</a>
    </li>
    <li class="divider">
    <li>
      <a href="news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/bench">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="bench" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#bench" class="anchor"></a>bench</h1></div>

<p>The goal of bench is to benchmark code, tracking execution time, memory allocations and garbage collections.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">"r-lib/bench"</span>)</a></code></pre></div>
</div>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h2>
<p><code><a href="reference/mark.html">bench::mark()</a></code> is used to benchmark one or a series of expressions, we feel it has a number of advantages over <a href="#alternatives">alternatives</a>.</p>
<ul>
<li>Always uses the highest precision APIs available for each operating system (often nanoseconds).</li>
<li>Tracks memory allocations for each expression.</li>
<li>Tracks the number and type of R garbage collections per expression iteration.</li>
<li>Verifies equality of expression results by default, to avoid accidentally benchmarking inequivalent code.</li>
<li>Has <code><a href="reference/press.html">bench::press()</a></code>, which allows you to easily perform and combine benchmarks across a large grid of values.</li>
<li>Uses adaptive stopping by default, running each expression for a set amount of time rather than for a specific number of iterations.</li>
<li>Expressions are run in batches and summary statistics are calculated after filtering out iterations with garbage collections. This allows you to isolate the performance and effects of garbage collection on running time (for more details see <a href="https://radfordneal.wordpress.com/2014/02/02/inaccurate-results-from-microbenchmark/">Neal 2014</a>).</li>
</ul>
<p>The times and memory usage are returned as custom objects which have human readable formatting for display (e.g. <code>104ns</code>) and comparisons (e.g. <code>x$mem_alloc &gt; "10MB"</code>).</p>
<p>There is also full support for plotting with <a href="http://ggplot2.tidyverse.org/">ggplot2</a> including custom scales and formatting.</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="benchmark" class="section level3">
<h3 class="hasAnchor">
<a href="#benchmark" class="anchor"></a><code>bench::mark()</code>
</h3>
<p>Benchmarks can be run with <code><a href="reference/mark.html">bench::mark()</a></code>, which takes one or more expressions to benchmark against each other.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bench)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">dat &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">10000</span>, <span class="dv">1</span>, <span class="dv">1000</span>), <span class="dt">y=</span><span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="dv">10000</span>, <span class="dv">1</span>, <span class="dv">1000</span>))</a></code></pre></div>
<p><code><a href="reference/mark.html">bench::mark()</a></code> will throw an error if the results are not equivalent, so you don’t accidentally benchmark inequivalent code.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">  dat[dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>, ],</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  dat[<span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">499</span>), ],</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(dat, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>))</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; Error: Each result must equal the first result:</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;   `[` does not equal `[`Each result must equal the first result:</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;   `dat` does not equal `dat`Each result must equal the first result:</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;   `dat$x &gt; 500` does not equal `which(dat$x &gt; 499)`Each result must equal the first result:</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;   `` does not equal ``</span></a></code></pre></div>
<p>Results are easy to interpret, with human readable units.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">bnch &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  dat[dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>, ],</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  dat[<span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>), ],</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(dat, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>))</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">bnch</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; # A tibble: 3 x 6</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;   expression                     min   median `itr/sec` mem_alloc `gc/sec`</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; 1 dat[dat$x &gt; 500, ]           408µs    491µs     1998.     377KB     0   </span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 2 dat[which(dat$x &gt; 500), ]    250µs    371µs     2798.     260KB     2.31</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; 3 subset(dat, x &gt; 500)         407µs    606µs     1750.     494KB     2.27</span></a></code></pre></div>
<p>By default the summary uses absolute measures, however relative results can be obtained by using <code>relative = TRUE</code> in your call to <code><a href="reference/mark.html">bench::mark()</a></code> or calling <code><a href="https://rdrr.io/r/base/summary.html">summary(relative = TRUE)</a></code> on the results.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(bnch, <span class="dt">relative =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 6</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt;   expression                  min median `itr/sec` mem_alloc `gc/sec`</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;   &lt;bch:expr&gt;                &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 1 dat[dat$x &gt; 500, ]         1.63   1.32      1.14      1.45      NaN</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 2 dat[which(dat$x &gt; 500), ]  1      1         1.60      1         Inf</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 3 subset(dat, x &gt; 500)       1.63   1.63      1         1.90      Inf</span></a></code></pre></div>
</div>
<div id="benchpress" class="section level3">
<h3 class="hasAnchor">
<a href="#benchpress" class="anchor"></a><code>bench::press()</code>
</h3>
<p><code><a href="reference/press.html">bench::press()</a></code> is used to run benchmarks against a grid of parameters. Provide setup and benchmarking code as a single unnamed argument then define sets of values as named arguments. The full combination of values will be expanded and the benchmarks are then <em>pressed</em> together in the result. This allows you to benchmark a set of expressions across a wide variety of input sizes, perform replications and other useful tasks.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"></a>
<a class="sourceLine" id="cb6-3" data-line-number="3">create_df &lt;-<span class="st"> </span><span class="cf">function</span>(rows, cols) {</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  <span class="kw"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span>(</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">    <span class="kw"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span>(cols, <span class="kw"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(rows, <span class="dv">1</span>, <span class="dv">100</span>), <span class="dt">simplify =</span> <span class="ot">FALSE</span>),</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">    <span class="kw"><a href="https://rdrr.io/r/base/rep.html">rep_len</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"x"</span>, letters), cols)))</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb6-8" data-line-number="8"></a>
<a class="sourceLine" id="cb6-9" data-line-number="9">results &lt;-<span class="st"> </span>bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/press.html">press</a></span>(</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">  <span class="dt">rows =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1000</span>, <span class="dv">10000</span>),</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="dt">cols =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  {</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">    dat &lt;-<span class="st"> </span><span class="kw">create_df</span>(rows, cols)</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">    bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/mark.html">mark</a></span>(</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">      <span class="dt">min_iterations =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">      <span class="dt">bracket =</span> dat[dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>, ],</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">      <span class="dt">which =</span> dat[<span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(dat<span class="op">$</span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>), ],</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">      <span class="dt">subset =</span> <span class="kw"><a href="https://rdrr.io/r/base/subset.html">subset</a></span>(dat, x <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>)</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">    )</a>
<a class="sourceLine" id="cb6-20" data-line-number="20">  }</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">)</a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; Running with:</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt;    rows  cols</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; 1  1000     2</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; 2 10000     2</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; 3  1000    10</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt; 4 10000    10</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28">results</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt; # A tibble: 12 x 12</span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt;    expression  rows  cols      min     mean   median      max `itr/sec` mem_alloc  n_gc n_itr total_time</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt;    &lt;bch:expr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt; &lt;bch:byt&gt; &lt;dbl&gt; &lt;int&gt;   &lt;bch:tm&gt;</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt;  1 bracket     1000     2   32.5µs   44.2µs   38.6µs 952.96µs    22643.   15.84KB     4  9996      441ms</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="co">#&gt;  2 which       1000     2   32.4µs   39.2µs   37.3µs 547.92µs    25526.    7.91KB     5  9995      392ms</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="co">#&gt;  3 subset      1000     2   51.5µs   63.1µs   57.9µs 912.45µs    15838.    27.7KB     5  7034      444ms</span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt;  4 bracket    10000     2   61.6µs   91.4µs   69.9µs  966.9µs    10943.  156.46KB    14  2991      273ms</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt;  5 which      10000     2     52µs   68.6µs   58.3µs   1.34ms    14575.   78.23KB    12  5533      380ms</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt;  6 subset     10000     2  101.9µs  144.9µs  115.7µs   1.11ms     6899.  273.79KB    18  2257      327ms</span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"><span class="co">#&gt;  7 bracket     1000    10   73.7µs     92µs   82.2µs   1.03ms    10873.   47.52KB     6  4760      438ms</span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">#&gt;  8 which       1000    10   66.5µs   78.8µs   73.5µs 915.93µs    12696.    7.91KB     7  5630      443ms</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="co">#&gt;  9 subset      1000    10   94.2µs    113µs  104.1µs 984.53µs     8849.   59.38KB     6  3826      432ms</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="co">#&gt; 10 bracket    10000    10  135.9µs  195.7µs  147.1µs   1.09ms     5110.   469.4KB    22  1510      296ms</span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="co">#&gt; 11 which      10000    10   86.4µs  106.3µs     96µs   1.03ms     9406.   78.23KB     9  3921      417ms</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="co">#&gt; 12 subset     10000    10  175.7µs  263.7µs  199.8µs   1.18ms     3792.  586.73KB    20  1111      293ms</span></a></code></pre></div>
</div>
</div>
<div id="plotting" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting" class="anchor"></a>Plotting</h2>
<p><code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">ggplot2::autoplot()</a></code> can be used to generate an informative default plot. This plot is colored by gc level (0, 1, or 2) and faceted by parameters (if any). By default it generates a <a href="https://github.com/eclarke/ggbeeswarm#geom_quasirandom">beeswarm</a> plot, however you can also specify other plot types (<code>jitter</code>, <code>ridge</code>, <code>boxplot</code>, <code>violin</code>). See <code><a href="reference/autoplot.bench_mark.html">?autoplot.bench_mark</a></code> for full details.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">ggplot2<span class="op">::</span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html">autoplot</a></span>(results)</a></code></pre></div>
<p><img src="reference/figures/README-autoplot-1.png" width="100%"></p>
<p>You can also produce fully custom plots by un-nesting the results and working with the data directly.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">results <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">  </span><span class="kw">unnest</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(gc <span class="op">==</span><span class="st"> "none"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">expression =</span> <span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(expression)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> mem_alloc, <span class="dt">y =</span> time, <span class="dt">color =</span> expression)) <span class="op">+</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="st">    </span><span class="kw"><a href="reference/scale_bench_expr.html">scale_color_bench_expr</a></span>(scales<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/scales/man/brewer_pal.html">brewer_pal</a></span>(<span class="dt">type =</span> <span class="st">"qual"</span>, <span class="dt">palette =</span> <span class="dv">3</span>))</a></code></pre></div>
<p><img src="reference/figures/README-custom-plot-1.png" width="100%"></p>
</div>
<div id="system_time" class="section level2">
<h2 class="hasAnchor">
<a href="#system_time" class="anchor"></a><code>system_time()</code>
</h2>
<p><strong>bench</strong> also includes <code><a href="reference/bench_time.html">system_time()</a></code>, a higher precision alternative to <a href="https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/system.time">system.time()</a>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/bench_time.html">system_time</a></span>({ i &lt;-<span class="st"> </span><span class="dv">1</span>; <span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="fl">1e7</span>) i &lt;-<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span> })</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; process    real </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;   388ms   388ms</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">bench<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/bench/man/bench_time.html">system_time</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(.<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt; process    real </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;   913µs   500ms</span></a></code></pre></div>
</div>
<div id="alternatives" class="section level2">
<h2 class="hasAnchor">
<a href="#alternatives" class="anchor"></a>Alternatives</h2>
<ul>
<li><a href="https://cran.r-project.org/package=rbenchmark">rbenchmark</a></li>
<li><a href="https://cran.r-project.org/package=microbenchmark">microbenchmark</a></li>
<li><a href="https://cran.r-project.org/package=tictoc">tictoc</a></li>
<li><a href="https://www.rdocumentation.org/packages/base/versions/3.5.0/topics/system.time">system.time()</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=bench">https://​cloud.r-project.org/​package=bench</a>
</li>
<li>Browse source code at <br><a href="https://github.com/r-lib/bench">https://​github.com/​r-lib/​bench</a>
</li>
<li>Report a bug at <br><a href="https://github.com/r-lib/bench/issues">https://​github.com/​r-lib/​bench/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://jimhester.com">Jim Hester</a> <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=bench"><img src="https://www.r-pkg.org/badges/version/bench" alt="CRAN status"></a></li>
<li><a href="https://travis-ci.org/r-lib/bench"><img src="https://travis-ci.org/r-lib/bench.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/r-lib/bench"><img src="https://ci.appveyor.com/api/projects/status/github/r-lib/bench?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/r-lib/bench?branch=master"><img src="https://codecov.io/gh/r-lib/bench/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jimhester.com">Jim Hester</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
